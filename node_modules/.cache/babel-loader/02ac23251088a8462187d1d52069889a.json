{"ast":null,"code":"import React from'react';import PopupWithForm from'./PopupWithForm.js';import{CurrentUserContext}from'../contexts/CurrentUserContext.js';import useFormWithValidation from'../utils/hooks/useFormWithValidation.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfilePopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateUser=_ref.onUpdateUser,isRender=_ref.isRender;var currentUser=React.useContext(CurrentUserContext);var _useFormWithValidatio=useFormWithValidation(),values=_useFormWithValidatio.values,setValues=_useFormWithValidatio.setValues,errors=_useFormWithValidatio.errors,isValid=_useFormWithValidatio.isValid,setIsValid=_useFormWithValidatio.setIsValid,onChange=_useFormWithValidatio.onChange,resetForm=_useFormWithValidatio.resetForm;React.useEffect(function(){if(currentUser){setValues({name:currentUser.name,about:currentUser.about});setIsValid(true);}},[currentUser,setIsValid,setValues]);React.useEffect(function(){resetForm({name:currentUser.name,about:currentUser.about});setIsValid(true);},[isOpen,resetForm,setIsValid,currentUser.name,currentUser.about]);function handleSubmit(evt){evt.preventDefault();onUpdateUser(values);}return/*#__PURE__*/_jsxs(PopupWithForm,{title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",name:\"edit-profile\",btnName:isRender?'Сохранение...':'Сохранить',isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,isDisabled:!isValid,children:[/*#__PURE__*/_jsx(\"input\",{value:values.name||'',onChange:onChange,className:\"popup__input popup__input_type_profile-name\",type:\"text\",id:\"name-input\",name:\"name\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043C\\u044F:\",minLength:\"2\",maxLength:\"40\",required:true}),/*#__PURE__*/_jsx(\"span\",{id:\"name-input-error\",className:\"popup__input-error \".concat(!isValid.name?'popup__input-error_active':'',\" \"),children:errors.name||''}),/*#__PURE__*/_jsx(\"input\",{value:values.about||'',onChange:onChange,className:\"popup__input popup__input_type_profile-job\",type:\"text\",id:\"job-input\",name:\"about\",placeholder:\"\\u0412\\u0430\\u0448\\u0430 \\u043F\\u0440\\u043E\\u0444\\u0435\\u0441\\u0441\\u0438\\u044F:\",minLength:\"2\",maxLength:\"200\",required:true}),/*#__PURE__*/_jsx(\"span\",{id:\"job-input-error\",className:\"popup__input-error \".concat(!isValid.about?'popup__input-error_active':'',\" \"),children:errors.about||''})]});}export default EditProfilePopup;","map":{"version":3,"names":["React","PopupWithForm","CurrentUserContext","useFormWithValidation","EditProfilePopup","isOpen","onClose","onUpdateUser","isRender","currentUser","useContext","values","setValues","errors","isValid","setIsValid","onChange","resetForm","useEffect","name","about","handleSubmit","evt","preventDefault"],"sources":["/Users/toolie/dev/mesto-react/src/components/EditProfilePopup.js"],"sourcesContent":["import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\nimport useFormWithValidation from '../utils/hooks/useFormWithValidation.js';\n\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser, isRender}) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const {\n    values,\n    setValues,\n    errors,\n    isValid,\n    setIsValid,\n    onChange,\n    resetForm,\n} = useFormWithValidation();\n\n\n  React.useEffect(() => {\n    if(currentUser) { \n      setValues({\n        name: currentUser.name,\n        about: currentUser.about,\n      });\n      setIsValid(true);\n    }\n  }, [currentUser, setIsValid, setValues]);\n\n  React.useEffect(() => {\n    resetForm({\n      name: currentUser.name,\n      about: currentUser.about,\n    })\n    setIsValid(true);\n  }, [isOpen, resetForm, setIsValid, currentUser.name, currentUser.about])\n\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    onUpdateUser(values)\n  }\n\n\n    return (\n        <PopupWithForm\n        title='Редактировать профиль'\n        name='edit-profile'\n        btnName={isRender ? 'Сохранение...' : 'Сохранить'}\n        isOpen={isOpen}\n        onClose={onClose}\n        onSubmit={handleSubmit}\n        isDisabled={!isValid}>\n          <input value={values.name || ''} onChange={onChange} className=\"popup__input popup__input_type_profile-name\" type=\"text\" id=\"name-input\" name=\"name\" placeholder=\"Введите имя:\" minLength=\"2\" maxLength=\"40\" required />\n          <span id=\"name-input-error\" className={`popup__input-error ${!isValid.name ? 'popup__input-error_active' : ''} `}>{errors.name || ''}</span>\n          <input value={values.about || ''} onChange={onChange} className=\"popup__input popup__input_type_profile-job\" type=\"text\" id=\"job-input\" name=\"about\" placeholder=\"Ваша профессия:\" minLength=\"2\" maxLength=\"200\" required />\n          <span id=\"job-input-error\" className={`popup__input-error ${!isValid.about ? 'popup__input-error_active' : ''} `}>{errors.about || ''}</span>\n        </PopupWithForm>\n    );\n}\n\nexport default EditProfilePopup;"],"mappings":"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"},"metadata":{},"sourceType":"module"}